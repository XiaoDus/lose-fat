"use strict";const e=require("../../common/vendor.js");if(!Array){const c=e.resolveComponent("uni-list-item"),i=e.resolveComponent("uni-list");(c+i)()}const d=()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js",f=()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js";Math||(d+f)();const h=e.defineComponent({__name:"Account",setup(c){const{$request:i}=e.getCurrentInstance().appContext.config.globalProperties,s=e.ref(null),n=e.ref(""),r=async()=>{const o=await i("/user/getUser","POST");o.code==="200"&&(s.value=o.data);const t=s.value.userPhone;n.value=t.slice(0,3)+"****"+t.slice(-4)},a=()=>{e.index.showModal({title:"确认更换手机号？",content:"更换后现手机号"+n.value+"将不能用于登录",cancelText:"我再想想",confirmText:"确认更换",success:function(o){o.confirm&&e.index.navigateTo({url:"/pageHome/VerifyPhone/VerifyPhone?phone="+s.value.userPhone+"&pwdPhone="+n.value+"&pageUrl=UpdataPhoneEnd"})}})},u=()=>{e.index.showModal({content:"确认更换密码吗？",cancelText:"我再想想",confirmText:"确认更换",confirmColor:"#E04350",success:function(o){o.confirm&&e.index.navigateTo({url:"/pageHome/VerifyPhone/VerifyPhone?phone="+s.value.userPhone+"&pwdPhone="+n.value+"&pageUrl=EditPwd"})}})},l=()=>{e.index.showModal({title:"警告",content:"注销后"+n.value+"绑定的账号无法恢复",cancelText:"我再想想",confirmText:"确认注销",confirmColor:"#E04350",success:async function(o){if(o.confirm){const t=await i("/user/deleteUser","POST");t.code==="200"?(e.index.removeStorageSync("user"),e.index.removeStorageSync("token"),e.index.showToast({title:"注销成功",duration:2e3,success:()=>{setTimeout(()=>{e.index.switchTab({url:"/pages/Home/Home"})},2500)}})):e.index.showToast({icon:"error",title:t.meaasge})}}})},m=()=>{e.index.showModal({confirmColor:"#E04350",confirmText:"确认退出",content:"是否确认退出？",success:o=>{o.confirm&&(e.index.removeStorageSync("user"),e.index.removeStorageSync("token"),e.index.switchTab({url:"/pages/Home/Home"}))}})};return e.onLoad(()=>{r()}),(o,t)=>({a:e.o(a),b:e.p({clickable:!0,showArrow:!0,title:"关联手机号",rightText:n.value}),c:e.o(u),d:e.p({clickable:!0,showArrow:!0,title:"修改密码",rightText:"********"}),e:e.o(l),f:e.p({clickable:!0,showArrow:!0,title:"注销账号",rightText:"注销后无法恢复,请谨慎操作"}),g:e.o(m)})}}),p=e._export_sfc(h,[["__file","/Users/xiaodu/前端/LoseFat/pageHome/Account/Account.vue"]]);wx.createPage(p);
