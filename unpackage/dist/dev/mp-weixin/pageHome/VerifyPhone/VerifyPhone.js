"use strict";const e=require("../../common/vendor.js"),p=e.defineComponent({__name:"VerifyPhone",setup(_){e.onLoad(a=>{n.value.phone=a.phone,c.value=a.pwdPhone,u.value=a.pageUrl});const{$request:s}=e.getCurrentInstance().appContext.config.globalProperties,u=e.ref(""),t=e.ref(!0),i=()=>{n.value.code.toString().length===4?t.value=!1:t.value=!0},c=e.ref(""),n=e.ref({phone:null,code:null}),l=e.ref("获取验证码"),r=e.ref(!1),v=e.ref(null),f=async()=>{const a=await s("/user/getCode?phone="+n.value.phone,"POST");let o=61;a.code==="200"&&(r.value=!0,v.value=setInterval(()=>{if(o==0){r.value=!1,clearInterval(v.value),l.value="重新获取验证码";return}o-=1,l.value=o+"秒"},1e3))},d=async()=>{const a=await s("/user/verifyPhone","POST",n.value);a.code==="200"?(n.value.code=null,e.index.navigateTo({url:"/pageHome/"+u.value+"/"+u.value})):e.index.showToast({icon:"error",title:a.message})};return(a,o)=>({a:e.t(c.value),b:e.o([g=>n.value.code=g.detail.value,i]),c:n.value.code,d:e.t(l.value),e:r.value,f:e.o(f),g:e.o(d),h:e.n(t.value?"next-button-false":"next-button-true"),i:t.value})}}),h=e._export_sfc(p,[["__scopeId","data-v-c5bc6ed6"],["__file","/Users/xiaodu/前端/LoseFat/pageHome/VerifyPhone/VerifyPhone.vue"]]);wx.createPage(h);
