"use strict";const e=require("../../common/vendor.js");Array||e.resolveComponent("uni-icons")();const y=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js";Math||(x+y)();const x=()=>"../../uni_modules/lime-echart/components/l-echart/l-echart.js",v=e.defineComponent({__name:"Records",setup(d){const p=()=>{e.index.navigateTo({url:"../../pageWeightList/WeightList/WeightList"})},_=(()=>{let t=new Date,s=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();return i<10&&(i=`0${i}`),a<10&&(a=`0${a}`),`${s}-${i}-${a}`})(),n=e.ref("--"),r=e.ref(null),c=e.reactive({option:{xAxis:{type:"category",data:[],axisTick:{alignWithLabel:!0},axisLabel:{show:!0,interval:0}},yAxis:{name:"单位（斤）",type:"value",interval:10,min:70},series:[{itemStyle:{normal:{label:{show:!0}}},data:[150,230,224,218,135,147,260],type:"line"}]}});e.onShow(()=>{setTimeout(async()=>{r.value&&g()},0)});const{$request:l}=e.getCurrentInstance().appContext.config.globalProperties,u=e.reactive({data:1}),h=(()=>{let t=[];for(let s=80;s<=300;s++)t.push(s+" 斤");return t})(),g=async()=>{const t=await l("/user_weight_data","GET");let s=[],i=[];if(t.code==="200"){const a=t.data.slice(-7);for(let o=0;o<a.length;o++)a[o].xAxisData===_&&(n.value=a[o].seriesData),s.push(a[o].seriesData),i.push(a[o].xAxisData.substring(5));c.option.xAxis.data=i,c.option.series[0].data=s,(await r.value.init(e.echarts)).setOption(c.option)}},m=t=>{const s=h[t.detail.value].slice(0,-2);u.data=s,n.value=s,f()},f=()=>{l("/user_weight_data","POST",u).then(t=>{t.code==="200"&&g()})};return(t,s)=>({a:e.sr(r,"838e80ce-0",{k:"chartRef"}),b:e.o(t.init),c:e.p({type:"right",size:"20"}),d:e.p({type:"plus-filled",color:"green",size:"30"}),e:e.unref(h),f:e.o(m),g:e.o(()=>{}),h:e.t(n.value),i:e.o(p)})}}),w=e._export_sfc(v,[["__scopeId","data-v-838e80ce"],["__file","/Users/xiaodu/前端/LoseFat/pages/Records/Records.vue"]]);wx.createPage(w);
