"use strict";const e=require("../../common/vendor.js");if(!Array){const p=e.resolveComponent("uni-icons"),n=e.resolveComponent("uni-popup-message"),l=e.resolveComponent("uni-popup");(p+n+l)()}const _=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",h=()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js",y=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(_+h+y)();const x={__name:"Home",setup(p){const{proxy:n}=e.getCurrentInstance(),{$request:l}=e.getCurrentInstance().appContext.config.globalProperties,d=()=>{l("/user/getUser","POST").then(a=>{a.code==="200"?(o.value=a.data,s.value=!0,e.index.setStorage({key:"user",data:o.value}),u.value=o.value.avatar,m.value=[{value:o.value.userHeight,text:"身高"},{value:o.value.userWeight,text:"体重"},{value:o.value.standardWeigth,text:"标准体重"}]):(o.value=null,s.value=!1,u.value="/file/download/login.png")})};e.onShow(()=>{d()});const r=e.ref(null),c=e.ref("success"),g=e.ref(""),s=e.ref(!1),o=e.ref(null),u=e.ref(""),m=e.ref(null),f=()=>{s.value?e.index.chooseMedia({count:1,mediaType:["image"],sourceType:["album"],success:a=>{e.index.uploadFile({url:n.$host+"/file/upload",filePath:a.tempFiles[0].tempFilePath,fileType:"image",name:"file",header:{Authorization:e.index.getStorageSync("token")},success:i=>{if(i.statusCode===200){const t=e.index.getStorageSync("user");t.avatar=i.data,e.index.setStorageSync("user",t),u.value=i.data}else c.value="error",g.value="修改失败，请稍后再试！",r.value.open()}})}}):e.index.navigateTo({url:"../../pageLogin/Login/Login"})};return(a,i)=>e.e({a:e.o(f),b:`${a.$host}${u.value}`,c:e.t(o.value!=null?o.value.userName:"请登录"),d:s.value},s.value?{e:e.f(m.value,(t,v,S)=>({a:e.t(t.value),b:e.t(t.text),c:v}))}:{},{f:s.value?"":"logo-hover",g:`${e.unref(n).$host}/file/download/gerenziliao.png`,h:e.p({type:"right",size:"20"}),i:o.value!=null?"../../pageHome/EditUser/EditUser":"../../pageLogin/Login/Login",j:`${e.unref(n).$host}/file/download/tongzhi.png`,k:e.p({type:"right",size:"20"}),l:`${e.unref(n).$host}/file/download/wenhao.png`,m:e.p({type:"right",size:"20"}),n:`${e.unref(n).$host}/file/download/yinsitiaokuan.png`,o:e.p({type:"right",size:"20"}),p:e.p({type:c.value,message:g.value,duration:2e3}),q:e.sr(r,"7ffebbf4-4",{k:"messageInfo"}),r:e.p({type:"message"})})}},$=e._export_sfc(x,[["__scopeId","data-v-7ffebbf4"],["__file","/Users/xiaodu/前端/LoseFat/pages/Home/Home.vue"]]);wx.createPage($);
