"use strict";const e=require("../../common/vendor.js");if(!Array){const l=e.resolveComponent("uni-icons"),n=e.resolveComponent("uni-popup-message"),p=e.resolveComponent("uni-popup");(l+n+p)()}const h=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",y=()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js",x=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(h+y+x)();const $={__name:"Home",setup(l){const{proxy:n}=e.getCurrentInstance(),{$request:p}=e.getCurrentInstance().appContext.config.globalProperties,d=()=>{p("/user/getUser","POST").then(s=>{s.code==="200"?(o.value=s.data,t.value=!0,e.index.setStorage({key:"user",data:o.value}),u.value=o.value.avatar,m.value=[{value:o.value.userHeight,text:"身高"},{value:o.value.userWeight,text:"体重"},{value:o.value.standardWeigth,text:"标准体重"}]):(t.value=!1,u.value="http://"+n.$host+"/file/download/login.png")})};e.onShow(()=>{d()});const r=e.ref(null),c=e.ref("success"),g=e.ref(""),t=e.ref(!1),o=e.ref(null),u=e.ref(""),m=e.ref(null),f=e.index.getStorageSync("token"),v=()=>{t.value?e.index.chooseMedia({count:1,mediaType:["image"],sourceType:["album"],success:s=>{e.index.uploadFile({url:"http://"+n.$host+"/file/upload",filePath:s.tempFiles[0].tempFilePath,fileType:"image",name:"file",header:{Authorization:f},success:i=>{if(i.statusCode===200){const a=e.index.getStorageSync("user");a.avatar=i.data,e.index.setStorageSync("user",a),u.value=i.data}else c.value="error",g.value="修改失败，请稍后再试！",r.value.open()}})}}):e.index.navigateTo({url:"../../pageLogin/Login/Login"})};return(s,i)=>e.e({a:e.o(v),b:u.value,c:e.t(o.value!=null?o.value.userName:"请登录"),d:t.value},t.value?{e:e.f(m.value,(a,_,b)=>({a:e.t(a.value),b:e.t(a.text),c:_}))}:{},{f:t.value?"":"logo-hover",g:`http://${e.unref(n).$host}/file/download/gerenziliao.png`,h:e.p({type:"right",size:"20"}),i:o.value!=null?"../../pageHome/EditUser/EditUser":"../../pageLogin/Login/Login",j:`http://${e.unref(n).$host}/file/download/tongzhi.png`,k:e.p({type:"right",size:"20"}),l:`http://${e.unref(n).$host}/file/download/wenhao.png`,m:e.p({type:"right",size:"20"}),n:`http://${e.unref(n).$host}/file/download/yinsitiaokuan.png`,o:e.p({type:"right",size:"20"}),p:e.p({type:c.value,message:g.value,duration:2e3}),q:e.sr(r,"7ffebbf4-4",{k:"messageInfo"}),r:e.p({type:"message"})})}},S=e._export_sfc($,[["__scopeId","data-v-7ffebbf4"],["__file","/Users/xiaodu/前端/LoseFat/pages/Home/Home.vue"]]);wx.createPage(S);
