"use strict";const e=require("../../common/vendor.js");if(!Array){const d=e.resolveComponent("uni-icons"),t=e.resolveComponent("uni-list-item"),c=e.resolveComponent("wd-loadmore");(d+t+c)()}const v=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",y=()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js",w=()=>"../../uni_modules/wot-design-uni/components/wd-loadmore/wd-loadmore.js";Math||(v+y+w)();const h=e.defineComponent({__name:"FoodList",setup(d){const{$request:t}=e.getCurrentInstance().appContext.config.globalProperties,{proxy:c}=e.getCurrentInstance(),g=e.reactive({1:"#70c995",2:"#f7cc4f",3:"red"}),i=e.ref(!0),r=e.ref([]),u=e.ref(null),m=e.ref(1),_=e.ref("loading"),f=async()=>{const o=await t("/foods/get_foodbyclass/?id="+u.value+"&pageNum="+m.value,"GET");o.code==="200"&&(o.data.records.length>0?(r.value.push(...o.data.records),i.value=!1):_.value="finished")},p=async o=>{const l=await t("/foods/food_message?foodId="+o,"GET");if(l.code=="200"){const s=l.data,n=await t("/collect/get_collect?foodId="+o,"GET");s.collect=n.data,e.index.navigateTo({url:"../FoodMessage/FoodMessage",success:a=>{e.index.$emit("foodMessage",s)}})}};return e.onReachBottom(()=>{m.value++,f()}),e.onLoad(o=>{e.index.setNavigationBarTitle({title:o.name}),u.value=o.id,f()}),(o,l)=>e.e({a:i.value},i.value?{b:`${e.unref(c).$host}/file/download/empty.png`}:{c:e.f(r.value,(s,n,a)=>({a:"4c479ab0-1-"+a+","+("4c479ab0-0-"+a),b:e.p({type:"smallcircle-filled",size:"15",color:g[s.healthLevel]}),c:e.o(x=>p(s.foodId),n),d:"4c479ab0-0-"+a,e:e.p({clickable:!0,title:s.name,note:s.calory+"千卡/100克",link:!0}),f:n})),d:e.p({["custom-class"]:"loadmore",state:_.value})})}}),b=e._export_sfc(h,[["__file","/Users/xiaodu/前端/LoseFat/pageSearch/FoodList/FoodList.vue"]]);wx.createPage(b);
