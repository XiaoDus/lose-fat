"use strict";const i=require("../../../../common/vendor.js"),a={name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data(){const n=`Uni_${Math.ceil(Math.random()*1e6).toString(36)}`,l=`Uni_${Math.ceil(Math.random()*1e6).toString(36)}`;return{textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:n,elIdBox:l,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}},watch:{text:function(n,l){this.initSize()}},computed:{isShowGetMore(){return this.showGetMore===!0||this.showGetMore==="true"},isShowClose(){return(this.showClose===!0||this.showClose==="true")&&(this.showGetMore===!1||this.showGetMore==="false")}},mounted(){this.$nextTick(()=>{this.initSize()})},methods:{initSize(){if(this.scrollable){let n=[],l=new Promise((s,t)=>{i.index.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec(o=>{this.textWidth=o[0].width,s()})}),e=new Promise((s,t)=>{i.index.createSelectorQuery().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec(o=>{this.boxWidth=o[0].width,s()})});n.push(l),n.push(e),Promise.all(n).then(()=>{this.animationDuration=`${this.textWidth/this.speed}s`,this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout(()=>{this.animationPlayState="running"},1e3)})}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}};Array||i.resolveComponent("uni-icons")();const r=()=>"../../../uni-icons/components/uni-icons/uni-icons.js";Math||r();function h(n,l,e,s,t,o){return i.e({a:t.show},t.show?i.e({b:e.showIcon===!0||e.showIcon==="true"},e.showIcon===!0||e.showIcon==="true"?{c:i.p({type:"sound",color:e.color,size:e.fontSize*1.5})}:{},{d:i.t(e.text),e:t.elId,f:e.scrollable?1:"",g:!e.scrollable&&(e.single||e.showGetMore)?1:"",h:e.color,i:e.fontSize+"px",j:e.fontSize*1.5+"px",k:t.wrapWidth+"px",l:t.animationDuration,m:t.animationDuration,n:t.webviewHide?"paused":t.animationPlayState,o:t.webviewHide?"paused":t.animationPlayState,p:t.animationDelay,q:t.animationDelay,r:t.elIdBox,s:e.scrollable?1:"",t:!e.scrollable&&(e.single||e.moreText)?1:"",v:e.scrollable?1:"",w:!e.scrollable&&(e.single||e.moreText)?1:"",x:e.scrollable?e.fontSize*1.5+"px":"auto",y:o.isShowGetMore},o.isShowGetMore?i.e({z:e.moreText.length>0},e.moreText.length>0?{A:i.t(e.moreText),B:e.moreColor,C:e.fontSize+"px"}:{D:i.p({type:"right",color:e.moreColor,size:e.fontSize*1.1})},{E:i.o((...c)=>o.clickMore&&o.clickMore(...c))}):{},{F:o.isShowClose},o.isShowClose?{G:i.o(o.close),H:i.p({type:"closeempty",color:e.color,size:e.fontSize*1.1})}:{},{I:e.backgroundColor,J:i.o((...c)=>o.onClick&&o.onClick(...c))}):{})}const u=i._export_sfc(a,[["render",h],["__scopeId","data-v-c3453ea3"],["__file","/Users/xiaodu/前端/LoseFat/uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar.vue"]]);wx.createComponent(u);
